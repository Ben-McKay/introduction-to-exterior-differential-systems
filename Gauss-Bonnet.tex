\chapter{The Gauss--Bonnet theorem}\label{chapter:Gauss.Bonnet}%
\chapterSummary{We prove that the integral of Gauss curvature over a compact oriented surface in \(3\)-dimensional Euclidean space is a diffeomorphism invariant.}


\section{Length and curvature of curves}
\begin{problem}{moving.frame:reparameterization}
Suppose that \(x(t)\) is a smooth curve in \(\E[3]\) so that \(x'(t) \ne 0\) for every \(t\) with \(t_0 \le t \le t_1\).
Prove that there is a reparameterization \(y(t)=x(\tau(t))\) for some function \(\tau(t)\) so that \(y'(t)\) is a unit length vector, i.e. \(y(t)\) has unit speed.
Prove that \(\tau(t)\) is uniquely determined up to adding a constant.
Prove that the length of \(y(t)\) for \(a \le t \le b\) is equal to the length of \(x(t)\) for \(\tau(a) \le t \le \tau(b)\).
\end{problem}
Take an oriented curve \(C\), in other words an oriented \(1\)-dimensional manifold, smoothly immersed in a surface \(S\).
An \emph{adapted frame}%
\define{frame!adapted}
for \(C\) at a point \(c \in C\) is a pair \((c,e)\) for \(S\), where \((x,e)\in\frameBundle{S}\) and \(x\) is the point of \(S\) at which the point \(c\in C\) lies, and \(e_1\) is a positively oriented basis of the tangent line to \(C\) at \(m\).
Let \(\adaptedFrameBundle{C}{S}\) be the set of all adapted frames for \(C\).
\begin{problem}{geodesics:curve.adapt}
Prove that the set \(\adaptedFrameBundle{C}{S}\) is a curve in \(C \times \frameBundle{S}\).
\end{problem}
Map \(\pr{c,e} \in \adaptedFrameBundle{C}{S} \mapsto \pr{x,e} \in \frameBundle{S}\).
Using this map to pullback \(\omega_1, \omega_2\) and \(\alpha=\gamma_{12}\).
If we parameterize \(C\), say as \(x(t)\), then \(e_1(t)\) is the unit vector in the direction of \(x'(t)\), so that \(\omega_1=e_1(t) \cdot dx=e_1(t) \cdot \frac{dx}{dt} \, dt=\norm{\dot{x}(s)} \, dt\).
So \(\omega_1\) is a well defined \(1\)-form on the curve \(C\) and \(\int_C \omega_1\) is the length of the curve \(C\).
Meanwhile \(e_2\) is perpendicular to the tangent line to \(C\), so on \(\adaptedFrameBundle{C}{S}\), \(\omega_2=e_2 \cdot dx=e_2 \cdot \frac{dx}{dt} \, dt=0\).
Therefore \(0=d\omega_2=\alpha \wedge \omega_1\).

Applying Cartan's lemma, \(\alpha=-\kappa_2 \, \omega_1\) for some function \(\kappa_2\).
The \(1\)-form \(\omega_1\) is a basis for the \(1\)-forms on \(\adaptedFrameBundle{C}{S}\). 
The equations \(\omega_2=0\) and \(\alpha=-\kappa_2 \omega_1\) are precisely the linear equations that cut out the tangent spaces of \(\adaptedFrameBundle{C}{S}\) inside \(\frameBundle{S}\).
\begin{problem}{geodesics:curvature.defined}
Prove that \(\kappa_2 e_2\), the \emph{geodesic curvature}%
\define{curvature!geodesic}\define{geodesic!curvature}
of the curve \(C\) at the point \(c\), is the projection of the curvature vector of \(C\) (as a space curve in \(\E[3]\)) to the tangent plane of \(S\).
\end{problem}
\begin{problem}{moving.frame:reparam}
Prove that the geodesic curvature of an oriented curve is unchanged if we reorient the curve.
\end{problem}
\begin{example} A flat plane \(P \subset \E[3]\) is perpendicular to a constant unit vector \(e_3\), so \(0=de_3=e_3 \cdot dx=e_3 \cdot de_1 = e_3 \cdot de_2\).
Therefore on \(\frameBundle{P}\), the shape operator vanishes.
Given a curve in the plane, the adapted frames have \(\omega_2=0\) and \(\alpha = -\kappa_2 \omega_1\).
If the curve is given by \(s \mapsto \pr{x_1(s),x_2(s)}\) in an arclength parameterization then we write the velocity vector as a 
\[
e_1 = \pr{\dot{x}_1,\dot{x}_2}=\pr{\cos \phi, \sin \phi},
\] 
and then, rotating by a right angle, 
\[
e_2 = \pr{-\dot{x}_2,\dot{x}_1}=\pr{-\sin \phi, \cos \phi},
\]
so that
\[
-\alpha=e_2 \cdot de_1 = \dot{\phi}(s) \, ds,
\]
i.e. \(\kappa = \dot{\phi}(s)\), the curvature is the rate of rotation of the unit tangent vector.
We can recover a curve from its curvature \(\kappa\), by integrating \(\kappa\) to find \(\phi\), and then integrating 
\[
\frac{dx}{ds} = \pr{\cos \phi, \sin \phi}
\]
to recover the curve.
Constants of integration represent rotation and translation of the curve.
\end{example}
\begin{example} 
To get a curve of constant curvature \(\kappa=\kappa_0\) in the plane, we integrate to find \(\phi = \kappa s\), up to a constant, and then up to a constant,
\[
x(s)=\frac{1}{\kappa_0} \pr{-\sin \kappa_0s, \cos \kappa_0 s},
\]
a circle.
\end{example}
\begin{lemma}
Take a curve \(C\) on a surface \(S\) in \(\E[3]\).
Suppose that \(C\) has curvature vector as a space curve nowhere perpendicular to \(S\).
Take \(\theta\) to be the angle between that curvature vector and its projection to the surface \(S\).
Its surface invariants (geodesic curvature vector \(\kappa\) and shape operator \(a\)) are related to its invariants as a space curve (the curvature \(k\) and torsion \(t\) of \(C\)) by
\[
\begin{array}{r@{\,=\,}l@{~}>{$\upshape}l<{$}}
\kappa&k\cos \theta \, e_2&geodesic curvature\\
a(\dot{x},\dot{x})&k\sin \theta \, e_3&normal curvature\\
a(\dot{x},\dot{x}^{\perp})&(\dot\theta+t)\,e_3&geodesic torsion
\end{array}
\]
where \(\dot{x}\) is its unit speed velocity in either orientation, and \(\dot{x}^{\perp}\) is the unit tangent vector to \(S\) normal to \(C\) which is closest to the curvature vector. 
\end{lemma}
\begin{proof}
Write the Serret--Frenet frame to \(C\) as \(e_1,\ot{e}_2,\ot{e}_3\), and all adapted frames to the surface \(S\) for which \(e_1\) is tangent to the curve \(C\) as \(e_1,e_2,e_3\).
Since \(e_1\) is the same for both frames, the other two pairs of legs are orthogonal transformations of one another:
\begin{align*}
\ot{e}_2 &= \cos \theta e_2 \mp \sin \theta e_3, \\
\ot{e}_3 &= \sin \theta e_2 \pm \cos \theta e_3.
\end{align*}
The angle \(\theta\) is at most \(\pi/2\), and equal just when the curvature vector as a space curve is perpendicular to the normal line on \(S\), which we suppose never happens.
Pick \(e_3\) so that \(\pm=+\).
The Serret--Frenet equations are
\begin{align*}
\dot{x} &= e_1, \\
\dot{e}_1 &= k\ot{e}_2, \\
\dot{\ot{e}}_2&=-ke_1+t\ot{e}_3,\\
\dot{\ot{e}}_3&=-t\ot{e}_2.
\end{align*}
Geodesic curvature is \(\kappa ds = -\alpha\).
The connection forms are
\begin{align*}
\begin{pmatrix}
-\alpha \\
-a_{11}ds \\
-a_{12}ds
\end{pmatrix}
&=
\begin{pmatrix}
\gamma_{21} \\
\gamma_{31} \\
\gamma_{32}
\end{pmatrix},
\\
&=
\begin{pmatrix}
e_2 \dot{e}_1 \\
e_3 \dot{e}_1 \\
e_3 \dot{e}_2
\end{pmatrix}ds,
\\
&=
\begin{pmatrix}
k \cos \theta \\
\pm  k \sin \theta \\
e_3 \frac{d}{ds}\left(\cos \theta \ot{e}_2 + \sin\theta \ot{e}_3\right)
\end{pmatrix}ds.
\end{align*}
\begin{problem}{moving.frame:torsion.relation}
Expand out the last line to finish the proof.
\end{problem}
\begin{answer}{moving.frame:torsion.relation}
\begin{align*}
e_3 \frac{d}{ds}\left(\cos \theta \ot{e}_2 + \sin\theta \ot{e}_3\right)
&=
e_3 \left(-\dot\theta\sin \theta \ot{e}_2 
+\cos\theta \dot{\ot{e}}_2
+\dot\theta\cos\theta \ot{e}_3
+ \sin\theta\dot{\ot{e}}_3
\right),
\\
&=
e_3 \left(-\dot\theta\sin \theta \ot{e}_2 
+\cos\theta (-ke_1+t\ot{e}_3)
+ \dot\theta\cos\theta \ot{e}_3
- t \sin\theta\ot{e}_2
\right),
\\
&=
e_3 \left(-\dot\theta\sin \theta \ot{e}_2 
+t\cos\theta \ot{e}_3
+ \dot\theta\cos\theta \ot{e}_3
- t \sin\theta\ot{e}_2
\right),
\\
&=
\dot\theta\sin^2 \theta
t\cos^2\theta
\dot\theta\cos^2\theta
+ t \sin^2\theta,
\\
&=
\dot\theta+t.
\end{align*}
\end{answer}
\end{proof}
\begin{problem}{moving.frame:lines.on.surface}
Suppose that a surface has a straight line on it, through every point, in every tangent direction through that point.
Prove that it is a plane.
\end{problem}
\begin{answer}{moving.frame:lines.on.surface}
We get \(\dot{e}_1=0\) along such a curve, at that point, so \(0=\gamma_{21}=\gamma_{31}\), so \(a_{11}=0\).
Since this occurs in all directions, \(a=0\).
\end{answer}




\section{The Gauss map}
Consider first a surface \(S\) in \(\E[3]\).
On its frame bundle we have \(\omega_1, \omega_2\) and \(\gamma_{12}\), so that
\begin{align*}
 d\omega_1 &= - \gamma_{12} \wedge \omega_2, \\
 d\omega_2 &= \gamma_{12} \wedge \omega_1, \\
 d\gamma_{12} &= K \omega_1 \wedge \omega_2.
\end{align*}
where \(K\) is the Gauss curvature of the surface.
We can find a geometric description of Gauss curvature.
Take the unit vector \(e_3\), which is uniquely determined at each point of \(S\) up to sign, being normal to \(S\).
Differentiate this vector, and write its derivative in the frame itself:
\begin{align*}
 de_3 &= \pr{e_1 \cdot de_3} e_1 + \pr{e_2 \cdot de_3}e_2 + \pr{e_3 \cdot de_3} e_3, \\
      &= \gamma_{13} e_1 + \gamma_{23} e_2 + \gamma_{33} e_3, \\
      \intertext{but \(\gamma_{33}=0\) because \(\gamma\) is antisymmetric,}
      &= \pr{a_{11} \omega_1 + a_{12} \omega_2}e_1+\pr{a_{12} \omega_1 + a_{22} \omega_2}e_2.
\end{align*}
So if we move in the \(e_1\) direction, the unit vector \(e_3\) moves by \(a_{11}e_1+a_{12}e_2\), while if we move in \(e_2\) direction, the unit vector \(e_3\) moves by \(a_{12}e_1+a_{22}e_2\).
The unit square \(e_1 \wedge e_2\) in the tangent plane \(T_x S\) maps by \(e_3'=de_3\) to the parallelogram
\[
 e_{3*} (e_1 \wedge e_2) = \pr{a_{11} a_{22} - a_{12}^2} e_1 \wedge e_2.
\]
But the Gauss curvature is \(K = a_{11} a_{22} - a_{12}^2\).
Therefore the Gauss curvature is the area stretch factor of the Gauss map \(e_3\).
While \(e_3\) is only defined on the frame bundle of \(S\), nonetheless it is defined locally on \(S\) up to sign; the sign doesn't alter the value of the area stretch factor.
Gauss curvature also doesn't depend on orientation.

\section{The Gauss--Bonnet theorem}\label{section:Gauss.Bonnet.moving.frame}
Take a vector field \(X\) on an oriented surface \(S\).
Away from the zeroes of \(X\), the unit vector field 
\[
e_1\defeq\frac{X}{\norm{X}}
\]
is defined.
Extend it to an oriented orthonormal basis \(e_1, e_2\).
This choice of orthonormal frame gives a section of \(\frameBundle{S} \to S\) over the points where \(X \ne 0\).

Take a point \(x_0 \in S\)  at which \(X\) has an isolated zero.
In any positively oriented chart near \(x_0\), draw a circle \(C_0\) around \(x_0\), so that \(x_0\) is the only zero of \(X\) inside the circle.
The \emph{index}\define{index!of vector field} of \(X\) at \(x_0\) is the number of times that the frame \(e_1, e_2\) turns around the origin, as measured in some choice of orthonormal frame \(e_1', e_2'\) defined near \(x_0\).
Write
\[
\begin{pmatrix}
e_1 \\
e_2
\end{pmatrix}
=
\begin{pmatrix}
\cos \theta & -\sin \theta \\
\sin \theta & \cos \theta
\end{pmatrix}
\begin{pmatrix}
e_1' \\
e_2'
\end{pmatrix}
\]
near \(C_0\).
The angle \(\theta\) varies by a multiple of \(2\pi\), say \(2 \pi n_0\), around \(C_0\), and the index of \(X\) at \(x_0\) is \(n_0\).
Clearly the index doesn't change if we continuously vary \(X\) while the surface \(S\) moves continuously in space \(\E[3]\). 
The sum of indices is the \emph{Euler characteristic}\define{Euler characteristic} \(\chi_X\).
\begin{problem}{moving.frame:index}
Prove that the vector field 
\[
X= a x \pderiv{}{x} + b y \pderiv{}{y}
\]
on the plane has index \(1\) if \(a,b > 0\) or \(a,b < 0\) and index \(-1\) if \(a\) and \(b\) have opposite signs.
\end{problem}
\begin{problem}{moving.frame:change.of.gauge}
Calculate out that
\[
\alpha=e_2 \cdot de_1 = e_2' \cdot de_1' - d \theta=\alpha'-d\theta.
\]
\end{problem}
The \emph{Euler characteristic}\define{Euler characteristic} of a compact oriented surface \(S\) is 
\[
\chi_S\defeq\frac{1}{2 \pi} \int_S K \, dA.
\]
\begin{theorem}\define{theorem!Gauss--Bonnet}\define{Gauss--Bonnet theorem}
Suppose that \(X\) is a vector field on a compact oriented surface \(S\) with only isolated zeroes. Then \(\chi_X=\chi_S\).
\end{theorem}
\begin{proof}
Take a set \(D_k\) diffeomorphic to a closed disk in some chart around each zero \(x_k\) of \(X\) and let \(C_k=\partial D_k\).
The framing \(e_1, e_2\) lifts 
\[
S'\defeq S - \bigcup_k D_k
\]
to a compact surface with boundary in \(\frameBundle{S}\).
Integrate:
\begin{align*}
\int_{S'} K \, dA
&= \int_{S'} d \alpha,
\\
&= \int_{\partial S'} \alpha,
\\
&= -\sum_k \int_{C_k} \alpha, \\
&= -\sum_k \int_{C_k} e_1 \cdot de_2, \\
&= -\sum_k \int_{C_k} e_1' \cdot de_2' + \sum_k \int_{C_k} d \theta,
\\
&= -\sum_k \int_{C_k} K \, dA + \sum_k 2 \pi \indx_{x_k} X,
\end{align*}
so that
\[
\int_S K \, dA = 2 \pi \sum_k \indx_{x_k} X.
\]
\end{proof}

\section{Degree}
Suppose that \(\varphi\colon P \to Q\) is a continuously differentiable map between two oriented manifolds of equal dimension, perhaps with corners.  
The \emph{sign}\define{sign!of map between manifolds of equal dimension}
of \(\varphi\) at a regular point \(p \in P\) is \(1\) if \(\varphi\) is orientation preserving near \(p\), and \(-1\) is \(\varphi\) is orientation reversing near \(p\).
Suppose that \(q_0 \in Q\) is a regular value and that there are only finitely points \(p \in P\) mapped to \(q_0\) by \(\varphi\).
The \emph{degree}\define{degree} of \(\varphi\) above \(q_0\) is the sum of signs at these points \(p\):
\[
\deg_{q_0} \varphi = \sum_{\varphi(p)=q_0} \left(\text{sign of \(\varphi\) at \(p\)}\right).
\]
The following two theorems are proven in \cite{McKay:2018}.
\begin{theorem}
Consider a proper continuously differentiable map \(\varphi\colon P \to Q\) between oriented manifolds (perhaps with corners). 
Suppose that \(Q\) is connected. 
The degree of \(\varphi\) is the same at all regular values.
\end{theorem}
\begin{theorem}
Suppose that \(\varphi\colon P \to Q\) is a proper continuously differentiable map 
between two oriented manifolds (perhaps with corners) of the same dimension, say \(n\), and that \(Q\) is connected. 
For any \(n\)-form \(\omega\) on \(Q\), which vanishes outside some compact set,
\[
\int_P \varphi^* \omega = \deg\varphi\,\int_Q \omega.
\]
\end{theorem}

\section{The Gauss map}
For any oriented surface \(S\) in \(\E[3]\), the \emph{Gauss map}\define{Gauss map} \(e_3\) taking each point \(x \in S\) its unit normal vector, a point of the unit sphere, has degree
\[
\deg e_3 = \frac{\int K \, dA}{4 \pi}=\frac{\chi_S}{2}.
\]
\begin{theorem}
On any compact oriented surface \(S\) in \(\E[3]\) with Gauss map \(e_3 \colon S \to \mathbb{S}^2\), \(2 \deg e_3 = \chi_X\), for any vector field \(X\) on \(S\) with only isolated zeroes.
\end{theorem}
\begin{theorem}\label{theorem:exists.decent.vf}
Every compact oriented surface \(S\) in \(\E[3]\), twice continuously differentiable, has a continuously differentiable vector field \(X\) with only finitely many zeroes, each of index \(1\) or \(-1\).
\end{theorem}
\begin{proof}
The Gauss map is onto: take any unit vector \(n\), and look at the points \(x \in S\) on which the linear function \(f(x) \defeq \ip{n}{x}\) has its maximum value.
By Sard's theorem,\SubIndex{Sard's theorem}\SubIndex{theorem!Sard} almost every point \(n\) in the unit sphere is a regular value of the Gauss map.
For such a value of \(n\), the differential of the Gauss map has full rank.
Its differential has determinant given by the Gauss curvature, so the Gauss curvature is nonzero at every point \(x \in S\) for which \(\nu(x)=n\).
The function \(f\) restricted to \(S\) has critical points at the points \(x\) where \(n\) is perpendicular to \(T_x S\).
Again by Sard's theorem,\SubIndex{Sard's theorem}\SubIndex{theorem!Sard} we can arrange that these points are regular values of the Gauss map, i.e. have nonzero Gauss curvature.
In any orthonormal framing \(e_1, e_2, e_3\), the differential of \(f\) is
\[
e_i \hook df = e_i \hook \pr{n \cdot x} = n \cdot e_i,
\]
for \(i=1,2\).
The second derivative matrix of \(f\) at a critical point is
\begin{align*}
f''\of{e_i,e_j}
&=
e_i \hook d\pr{n \cdot e_j},
\\
&=
e_i \hook n \cdot de_j,
\\
&=
e_i \hook \pr{\pm e_3} \cdot de_j,
\\
&=
\pm e_i \hook \gamma_{3j},
\\
&=
\mp a_{ji}.
\end{align*}
So the function \(f\) has \(f''\) a rank \(2\) quadratic form on each tangent space where \(f\) is critical.
In particular, if we write \(df = f_1 \omega_1 + f_2 \omega_2\), then the vector field 
\[
X=\nabla f = f_1 e_1 + f_2 e_2
\]
has only finitely many zeroes.
Since we can vary our surface continuously without changing indices, we can see that the index doesn't change as we vary \(S\) and \(f\) so that \(f\) remains critical at some point \(x_0\) with \(f''\) nondegenerate at \(x_0\).
In particular, we can arrange that \(S\) is flat near \(x_0\) with \(f\) a quadratic function instead, without changing the index.
But we saw above that the index of \(X=\nabla f\) at \(x_0\) is then \(1\) if \(\det f''\of{x_0} > 0\) and \(-1\) if \(\det f''\of{x_0} < 0\).
\end{proof}
\begin{corollary}
Diffeomorphic surfaces have equal Euler characteristic.
\end{corollary}

